---
import Layout from '../layouts/Layout.astro'
---

<Layout title="Welcome to Astro.">
  <main class="container mx-auto max-w-4xl px-4 py-2">
    <h1 class="text-center text-4xl font-bold">Kanban Board</h1>
    <div class="mb-4 border-b border-gray-200 dark:border-gray-700">
      <ul
        class="-mb-px flex flex-wrap text-center text-sm font-medium"
        id="myTab"
        data-tabs-toggle="#myTabContent"
        role="tablist"
      >
        <li class="mr-2" role="presentation">
          <button
            class="inline-block rounded-t-lg border-b-2 p-4"
            id="profile-tab"
            data-tabs-target="#profile"
            type="button"
            role="tab"
            aria-controls="profile"
            aria-selected="true">Profile</button
          >
        </li>
        <li class="mr-2" role="presentation">
          <button
            class="inline-block rounded-t-lg border-b-2 border-transparent p-4 hover:border-gray-300 hover:text-gray-600 dark:hover:text-gray-300"
            id="dashboard-tab"
            data-tabs-target="#dashboard"
            type="button"
            role="tab"
            aria-controls="dashboard"
            aria-selected="false">Dashboard</button
          >
        </li>
        <li class="mr-2" role="presentation">
          <button
            class="inline-block rounded-t-lg border-b-2 border-transparent p-4 hover:border-gray-300 hover:text-gray-600 dark:hover:text-gray-300"
            id="settings-tab"
            data-tabs-target="#settings"
            type="button"
            role="tab"
            aria-controls="settings"
            aria-selected="false">Settings</button
          >
        </li>
        <li role="presentation">
          <button
            class="inline-block rounded-t-lg border-b-2 border-transparent p-4 hover:border-gray-300 hover:text-gray-600 dark:hover:text-gray-300"
            id="contacts-tab"
            data-tabs-target="#contacts"
            type="button"
            role="tab"
            aria-controls="contacts"
            aria-selected="false">Contacts</button
          >
        </li>
      </ul>
    </div>
    <div id="myTabContent">
      <div
        class="rounded-lg bg-gray-50 p-4 dark:bg-gray-800"
        id="profile"
        role="tabpanel"
        aria-labelledby="profile-tab"
      >
        <p class="text-sm text-gray-500 dark:text-gray-400">
          This is some placeholder content the <strong
            class="font-medium text-gray-800 dark:text-white"
            >Profile tab's associated content</strong
          >. Clicking another tab will toggle the visibility of this one for the
          next. The tab JavaScript swaps classes to control the content
          visibility and styling.
        </p>
      </div>
      <div
        class="hidden rounded-lg bg-gray-50 p-4 dark:bg-gray-800"
        id="dashboard"
        role="tabpanel"
        aria-labelledby="dashboard-tab"
      >
        <p class="text-sm text-gray-500 dark:text-gray-400">
          This is some placeholder content the <strong
            class="font-medium text-gray-800 dark:text-white"
            >Dashboard tab's associated content</strong
          >. Clicking another tab will toggle the visibility of this one for the
          next. The tab JavaScript swaps classes to control the content
          visibility and styling.
        </p>
      </div>
      <div
        class="hidden rounded-lg bg-gray-50 p-4 dark:bg-gray-800"
        id="settings"
        role="tabpanel"
        aria-labelledby="settings-tab"
      >
        <p class="text-sm text-gray-500 dark:text-gray-400">
          This is some placeholder content the <strong
            class="font-medium text-gray-800 dark:text-white"
            >Settings tab's associated content</strong
          >. Clicking another tab will toggle the visibility of this one for the
          next. The tab JavaScript swaps classes to control the content
          visibility and styling.
        </p>
      </div>
      <div
        class="hidden rounded-lg bg-gray-50 p-4 dark:bg-gray-800"
        id="contacts"
        role="tabpanel"
        aria-labelledby="contacts-tab"
      >
        <p class="text-sm text-gray-500 dark:text-gray-400">
          This is some placeholder content the <strong
            class="font-medium text-gray-800 dark:text-white"
            >Contacts tab's associated content</strong
          >. Clicking another tab will toggle the visibility of this one for the
          next. The tab JavaScript swaps classes to control the content
          visibility and styling.
        </p>
      </div>
    </div>
    <script>
      document
        .querySelectorAll('button[role=tab][type=button]')
        .forEach(tabButton => {
          tabButton.addEventListener('click', e => {
            const target = e.target // current button tag
            const parent = target.parentNode.parentNode // ul tag
            const grandparent = parent.parentNode.parentNode // div tag
            parent
              .querySelectorAll('[aria-selected="true"]')
              .forEach(t => t.setAttribute('aria-selected', false))
            target?.setAttribute('aria-selected', true)
            grandparent.querySelectorAll('[role="tabpanel"]').forEach(p => {
              p.classList.add('hidden')
              p.setAttribute('hidden', true)
              p.setAttribute('aria-hidden', true)
            })
            const tabContent = grandparent.querySelector(
              `#${target?.getAttribute('aria-controls')}`
            )
            console.log(tabContent)
            tabContent.classList.remove('hidden')
            tabContent.removeAttribute('hidden')
            tabContent.removeAttribute('aria-hidden')
          })
        })
    </script>
  </main>
</Layout>

<style>
  button[aria-selected='true'] {
    @apply bg-gray-100 text-blue-600 dark:bg-gray-800 dark:text-blue-500;
    font-weight: 600;
  }
</style>
